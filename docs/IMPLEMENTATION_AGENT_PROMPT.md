# SpendSense Full Implementation Prompt

**Implement the complete SpendSense application in one comprehensive pass**, following the exact specifications defined in `SS_Reqs_PRD.md` (requirements) and `SS_Architecture_PRD.md` (architecture). The project structure has been fully set up per the Architecture PRD (lines 103-207), including all backend modules (`ingest/`, `features/`, `personas/`, `recommend/`, `guardrails/`, `ui/`, `eval/`, `shared/`), frontend structure (`components/`, `pages/`, `hooks/`, `lib/`), Prisma schema (12 tables matching SCHEMA.md), configuration files (TypeScript, Vite, Jest), Express server stub with route imports, middleware stubs, and seed.ts structure. All stub files contain TODO comments indicating what needs to be implemented. The database has been migrated and Prisma Client is generated. You must read `SS_Reqs_PRD.md` for functional requirements (synthetic data generation with 100 users per Section 1, signal detection per Section 2, persona assignment per Section 3, recommendation engine per Section 4, UX requirements per Section 5, guardrails per Section 6, operator view per Section 7, evaluation metrics per Section 8), and `SS_Architecture_PRD.md` for technical architecture (API endpoints with `/api` prefix per API section, OpenAI GPT-4o-mini integration with function calling per AI Integration section, Prisma ORM with SQLite, TypeScript full-stack). Additionally, reference `docs/SCHEMA.md` for database field definitions, `docs/DECISIONS.md` for architectural choices, `docs/LIMITATIONS.md` for known constraints, and `IMPLEMENTATION_SETUP.md` for implementation checklist details.

**Implement all components systematically**, starting with Phase 1 (data generation): complete `backend/prisma/seed.ts` to generate 100 synthetic users with Plaid-compatible data structure (20 per persona, 1-4 accounts per user, 2 years of transactions, 150 liabilities) using faker.js and fixed seed DATA_SEED=1337, then populate the content and offers tables. Phase 2 (signal detection): implement all modules in `backend/src/features/` (subscriptionDetector, savingsAnalyzer, creditAnalyzer, incomeStabilityAnalyzer) per Reqs PRD Section 2 with windowed queries (30d and 180d), storing results in signals table. Phase 3 (personas): implement `backend/src/personas/scoringEngine.ts` and `personaDefinitions.ts` per Reqs PRD Section 3, assigning primary/secondary personas to all users. Phase 4 (recommendations): implement `backend/src/recommend/` modules (contentMatcher, offerMatcher, rationaleGenerator with templates, agenticReview) per Reqs PRD Section 4, generating 3-5 education items + 1-3 offers per user with decision traces. Phase 5 (API & frontend): implement all routes in `backend/src/ui/routes/` (auth, users, profile, recommendations with refresh logic, chat, operator) with proper middleware (auth, consent gating, error handling), implement React frontend pages (Dashboard with alerts, Insights, Library, Settings with consent management, Operator dashboard with manual controls), and connect to API using `frontend/src/lib/apiClient.ts`. Phase 6 (guardrails & evaluation): implement consent middleware blocking, tone blocklist validation, eligibility checking, operator override capabilities, and evaluation harness computing coverage, explainability, latency, and auditability metrics per Reqs PRD Section 8. Use deterministic settings (temperature=0, top_p=1) for OpenAI chat with 9 approved function tools per Architecture PRD Appendix. Ensure all results are reproducible with fixed seeds, validate against success criteria table, write comprehensive tests (â‰¥10 tests per Reqs PRD Section 8.4), and verify the system works end-to-end with `npm run dev` starting both servers successfully.

